<!DOCTYPE html>
<html lang="en" dir="auto" data-theme="dark">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>When ChatGPT will let you down?After 6 hours on a project | Xi&#39;s Blog</title>
<meta name="keywords" content="ChatGPT, LLM, HomeAssistant, Raspberry-Pi">
<meta name="description" content="Introduction
Nowadays, chatgpt has been integrated into every aspect of our lives and work. It greatly enhances the capacity not only of the individual developer, but of staff in giant tech.
It also has great potential in education. In my opinion, it&rsquo;s more like a very, very patient personal teacher that can many strange questions any time and is willing to discuss the details with you. And it possesses almost all human knowledge, akin to Aristotle in 21st centry.">
<meta name="author" content="Xi Chen">
<link rel="canonical" href="https://xichen1997.github.io/posts/2024-07-21-when-chatgpt-will-let-you-down-after-6-hours-on-a-project/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.56bf4be95d09faf55cd507c845718ccfcabb2e24e37f8fa5a66f9fa098252b06.css" integrity="sha256-Vr9L6V0J&#43;vVc1QfIRXGMz8q7LiTjf4&#43;lpm&#43;foJglKwY=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://xichen1997.github.io/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://xichen1997.github.io/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://xichen1997.github.io/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://xichen1997.github.io/apple-touch-icon.png">
<link rel="mask-icon" href="https://xichen1997.github.io/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="https://xichen1997.github.io/posts/2024-07-21-when-chatgpt-will-let-you-down-after-6-hours-on-a-project/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
</noscript>
<script>
    if (localStorage.getItem("pref-theme") === "light") {
        document.querySelector("html").dataset.theme = 'light';
    }

</script>
<script>
MathJax = {
  tex: {
    inlineMath: [['$', '$'], ['\\(', '\\)']],
    displayMath: [['$$', '$$'], ['\\[', '\\]']],
    processEscapes: true,
    processEnvironments: true
  },
  options: {
    skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre']
  }
};

window.addEventListener('load', (event) => {
    document.querySelectorAll("mjx-container").forEach(function(x){
      x.parentElement.classList += 'has-jax'})
  });
</script>
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script type="text/javascript" id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

<meta property="og:url" content="https://xichen1997.github.io/posts/2024-07-21-when-chatgpt-will-let-you-down-after-6-hours-on-a-project/">
  <meta property="og:site_name" content="Xi&#39;s Blog">
  <meta property="og:title" content="When ChatGPT will let you down?After 6 hours on a project">
  <meta property="og:description" content="Introduction Nowadays, chatgpt has been integrated into every aspect of our lives and work. It greatly enhances the capacity not only of the individual developer, but of staff in giant tech.
It also has great potential in education. In my opinion, it’s more like a very, very patient personal teacher that can many strange questions any time and is willing to discuss the details with you. And it possesses almost all human knowledge, akin to Aristotle in 21st centry.">
  <meta property="og:locale" content="en-us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-07-21T00:05:14-04:00">
    <meta property="article:modified_time" content="2024-07-21T00:05:14-04:00">
    <meta property="article:tag" content="ChatGPT">
    <meta property="article:tag" content="LLM">
    <meta property="article:tag" content="HomeAssistant">
    <meta property="article:tag" content="Raspberry-Pi">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="When ChatGPT will let you down?After 6 hours on a project">
<meta name="twitter:description" content="Introduction
Nowadays, chatgpt has been integrated into every aspect of our lives and work. It greatly enhances the capacity not only of the individual developer, but of staff in giant tech.
It also has great potential in education. In my opinion, it&rsquo;s more like a very, very patient personal teacher that can many strange questions any time and is willing to discuss the details with you. And it possesses almost all human knowledge, akin to Aristotle in 21st centry.">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://xichen1997.github.io/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "When ChatGPT will let you down?After 6 hours on a project",
      "item": "https://xichen1997.github.io/posts/2024-07-21-when-chatgpt-will-let-you-down-after-6-hours-on-a-project/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "When ChatGPT will let you down?After 6 hours on a project",
  "name": "When ChatGPT will let you down?After 6 hours on a project",
  "description": "Introduction Nowadays, chatgpt has been integrated into every aspect of our lives and work. It greatly enhances the capacity not only of the individual developer, but of staff in giant tech.\nIt also has great potential in education. In my opinion, it\u0026rsquo;s more like a very, very patient personal teacher that can many strange questions any time and is willing to discuss the details with you. And it possesses almost all human knowledge, akin to Aristotle in 21st centry.\n",
  "keywords": [
    "ChatGPT", "LLM", "HomeAssistant", "Raspberry-Pi"
  ],
  "articleBody": "Introduction Nowadays, chatgpt has been integrated into every aspect of our lives and work. It greatly enhances the capacity not only of the individual developer, but of staff in giant tech.\nIt also has great potential in education. In my opinion, it’s more like a very, very patient personal teacher that can many strange questions any time and is willing to discuss the details with you. And it possesses almost all human knowledge, akin to Aristotle in 21st centry.\nHowever, as we know, the model is based on “probability”, which means it doesn’t really understand sentense, but answer our queries with all the data feeded into the model, hided under billions of parameters. So that’s why the answer from it can be misleading and prejudiced.\nBecause it lacks reasoning, it’s very hard to say no to queries it doesn’t know well. Some times it replies based on old memory, like the bugs under different operating system versions, leading to confusing answer. That’s the hallucination–a slight details can lead a giant error– is a significant drawback.\nHere is my experience using GPT, setting up home assistant operating system on my raspberry pi 5.\nSet up HomeAssistant with raspberry pi First, I downloaded a specific operating system image and flash it into a SD card, which let the HomeAssistant run without any problem.\nHowever, I found the fan connected to the raspberry pi couldn’t response while the temperature is rising. (Raspberry pi 5 peak power reaches 27W, which need active cooling fan).\nI guessed it’s the operating system doesn’t support GPIO control like official image. Then I looked for some workarounds, for example, running the HA(homeassistant) in the docker:\nhttps://github.com/HuckleberryLovesYou/Homeassistant-Supervised-on-Raspberry-Pi-5\nBut this version is for supervised version, which doesn’t have full access or control to the HA, for example, we couldnt’ install any addOns in the system.\nFind solution on naive HA system Then I asked for ChatGPT and Claude about the solution, they both suggest me to go with an addOn which will trigger the GPIO to control the fan.\nlocal addOns configuration Adding another addOns are pretty easy but interesting, HA will run docker containers as an addOn, and then the config.yaml will be filtered out as addOn configuration, another Dockerfile should be in the same directory.\n1 2 3 4 5 6 7 8 # Docker file FROM python:3.9-slim RUN pip install RPi.GPIO COPY fan_control.py /app/fan_control.py CMD [\"python\", \"/app/fan_control.py\"] 1 2 3 4 name: Fan Control version: \"1.0\" slug: fan_control description: Control the Raspberry Pi fan. Then I try to launch it and find the addons in addOn store, however, I couldn’t find it. I refresh the cache in the browser for 5 mins and couldn’t find the new local addOns, then I asked GPT for fix, nothing really helpful.\nThen I looked for the documents for HA local addOn configurations, I found: https://developers.home-assistant.io/docs/add-ons/configuration/#add-on-configuration\nThere are 5 options are required to make the configuration works:\nname version slug description arch It worked after I added arch.\nsetup gpio to control fan The fan I used was Geeekpi ICE tower fan, I need to control it with GPIO 4.\nThen GPT gives me python script to control it:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 import RPi.GPIO as GPIO import time import os FAN_PIN = 4 TEMP_THRESHOLD = 70 # in Celsius GPIO.setmode(GPIO.BCM) GPIO.setup(FAN_PIN, GPIO.OUT) def get_cpu_temperature(): temp = os.popen(\"vcgencmd measure_temp\").readline() return float(temp.replace(\"temp=\", \"\").replace(\"'C\\n\", \"\")) try: while True: temp = get_cpu_temperature() if temp \u003e TEMP_THRESHOLD: GPIO.output(FAN_PIN, True) else: GPIO.output(FAN_PIN, False) time.sleep(5) except KeyboardInterrupt: GPIO.cleanup() However, it didn’t work. After checking the logging, I found that RPi.GPIO is not supported. Then I realized it’s not official image, may doesn’t have the GPIO configuration. Then I asked GPT to have a GPIO mapping, it gives me some suggestions:\nAdding privileged=true in configuration yaml file. which will adding --privileged when running the docker.\nMapping the GPIO devices: devices: - \"/dev/gpiomem:/dev/gpiomem\"\nBoth of them doesn’t work, then I try to launch these addOns by docker directly(which will save lot of time because doesn’t need to wait it generated addOns)\nI check the devices under /dev and run docker like:\n1 2 3 4 5 6 7 8 docker run --privileged -it \\ --device /dev/gpiomem:/dev/gpiomem \\ --device /dev/gpiomem0:/dev/gpiomem0 \\ --device /dev/gpiomem1:/dev/gpiomem1 \\ --device /dev/gpiomem2:/dev/gpiomem2 \\ --device /dev/gpiomem3:/dev/gpiomem3 \\ --device /dev/gpiomem4:/dev/gpiomem4 \\ gpio_test_image But it still doesn’t work.\nI have spent more than 5 hours on it then, and I was looking for the docs about it. Then I found some body already talked about it:\nhttps://community.home-assistant.io/t/raspberry-pi-5-gpio-pins-problem/667111\nAnd it’s not supported on raspberry pi5, only works under raspberry pi4.\nReflection The LLM can give us lots of information based on the training data. However, it still has many disadvantage.\nFirst, hallucination. It will make up some knowledge which doesn’t based on prior knowledge. In my case, it made up the knowledge about HA in raspberry pi5. And it can’t tell us which one is not possible, and if we should stop trying with current method(lack of reasoning capacity).\nThis will lead us spending a lot of time to debug what it tells us, which is much more time consuming. If I knew the raspberry pi5 can’t use GPIO with HA I wouldn’t try it.\nEven if it has lots of shortages, we can still use it and learn from it. For example, I used it and learned how to setup addons in HomeAssistant, which I would almost never touch this area, and it also taught me how to make a docker image with Dockerfile in a understandable and practical way, which is really helpful.\nWe should take the advantage with LLM to open our horizon and technical stacks, this will provide different point of view when we meet something new.\nExpert will has more advantage This new technology will benefit the experienced programmer more. Once the LLM provide some solutions or code, the programmer with more experience will know if this is possible or not very quick and give some more detailed instruction to LLM. As we know if we give a more detailed and well-organized description, we will have better output.\nIn this case these experts will free their hands from debugs and tedious work and think more deeper and systemically, which greatly increase productivity(Few people could organize a company).\nThe LLM is more like a powerful tool. Those with lots of prior knowledge will use it in the best way.\n",
  "wordCount" : "1083",
  "inLanguage": "en",
  "datePublished": "2024-07-21T00:05:14-04:00",
  "dateModified": "2024-07-21T00:05:14-04:00",
  "author":{
    "@type": "Person",
    "name": "Xi Chen"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://xichen1997.github.io/posts/2024-07-21-when-chatgpt-will-let-you-down-after-6-hours-on-a-project/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Xi's Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://xichen1997.github.io/favicon.ico"
    }
  }
}
</script>
</head>
<body id="top">
    <header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://xichen1997.github.io/" accesskey="h" title="Xi&#39;s Blog (Alt + H)">Xi&#39;s Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://xichen1997.github.io/posts/" title="Posts">
                    <span>Posts</span>
                </a>
            </li>
            <li>
                <a href="https://xichen1997.github.io/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
            <li>
                <a href="https://xichen1997.github.io/categories/" title="Categories">
                    <span>Categories</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://xichen1997.github.io/">Home</a>&nbsp;»&nbsp;<a href="https://xichen1997.github.io/posts/">Posts</a></div>
    <h1 class="post-title entry-hint-parent">
      When ChatGPT will let you down?After 6 hours on a project
    </h1>
    <div class="post-meta"><span title='2024-07-21 00:05:14 -0400 EDT'>July 21, 2024</span>&nbsp;·&nbsp;<span>6 min</span>&nbsp;·&nbsp;<span>1083 words</span>&nbsp;·&nbsp;<span>Xi Chen</span>

</div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><nav id="TableOfContents">
  <ul>
    <li><a href="#local-addons-configuration">local addOns configuration</a></li>
    <li><a href="#setup-gpio-to-control-fan">setup gpio to control fan</a></li>
  </ul>

  <ul>
    <li>
      <ul>
        <li><a href="#first-hallucination">First, hallucination.</a></li>
        <li><a href="#even-if-it-has-lots-of-shortages-we-can-still-use-it-and-learn-from-it">Even if it has lots of shortages, we can still use it and learn from it.</a></li>
        <li><a href="#expert-will-has-more-advantage">Expert will has more advantage</a></li>
      </ul>
    </li>
  </ul>
</nav>
        </div>
    </details>
</div>

  <div class="post-content"><h1 id="introduction">Introduction<a hidden class="anchor" aria-hidden="true" href="#introduction">#</a></h1>
<p>Nowadays, chatgpt has been integrated into every aspect of our lives and work. It greatly enhances the capacity not only of the individual developer, but of staff in giant tech.</p>
<p>It also has great potential in education. In my opinion, it&rsquo;s more like a very, very patient personal teacher that can many strange questions any time and is willing to discuss the details with you. And it possesses almost all human knowledge, akin to Aristotle in 21st centry.</p>
<p>However, as we know, the model is based on &ldquo;probability&rdquo;, which means it doesn&rsquo;t really understand sentense, but answer our queries with all the data feeded into the model, hided under billions of parameters. So that&rsquo;s why the answer from it can be misleading and prejudiced.</p>
<p>Because it lacks reasoning, it&rsquo;s very hard to say no to queries it doesn&rsquo;t know well. Some times it replies based on old memory, like the bugs under different operating system versions,
leading to confusing answer. That&rsquo;s the hallucination&ndash;a slight details can lead a giant error&ndash; is a significant drawback.</p>
<p>Here is my experience using GPT, setting up home assistant operating system on my raspberry pi 5.</p>
<h1 id="set-up-homeassistant-with-raspberry-pi">Set up HomeAssistant with raspberry pi<a hidden class="anchor" aria-hidden="true" href="#set-up-homeassistant-with-raspberry-pi">#</a></h1>
<p>First, I downloaded a specific operating system image and flash it into a SD card, which let the HomeAssistant run without any problem.</p>
<p>However, I found the fan connected to the raspberry pi couldn&rsquo;t response while the temperature is rising. (Raspberry pi 5 peak power reaches 27W, which need active cooling fan).</p>
<p>I guessed it&rsquo;s the operating system doesn&rsquo;t support GPIO control like official image. Then I looked for some workarounds, for example, running the HA(homeassistant) in the docker:</p>
<p><a href="https://github.com/HuckleberryLovesYou/Homeassistant-Supervised-on-Raspberry-Pi-5">https://github.com/HuckleberryLovesYou/Homeassistant-Supervised-on-Raspberry-Pi-5</a></p>
<p>But this version is for supervised version, which doesn&rsquo;t have full access or control to the HA, for example, we couldnt&rsquo; install any addOns in the system.</p>
<h1 id="find-solution-on-naive-ha-system">Find solution on naive HA system<a hidden class="anchor" aria-hidden="true" href="#find-solution-on-naive-ha-system">#</a></h1>
<p>Then I asked for ChatGPT and Claude about the solution, they both suggest me to go with an addOn which will trigger the GPIO to control the fan.</p>
<h2 id="local-addons-configuration">local addOns configuration<a hidden class="anchor" aria-hidden="true" href="#local-addons-configuration">#</a></h2>
<p>Adding another addOns are pretty easy but interesting, HA will run docker containers as an addOn, and then the config.yaml will be filtered out as addOn configuration, another Dockerfile should be in the same directory.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-Dockerfile" data-lang="Dockerfile"><span class="line"><span class="cl"><span class="c"># Docker file</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="k">FROM</span><span class="w"> </span><span class="s">python:3.9-slim</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="k">RUN</span> pip install RPi.GPIO<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="k">COPY</span> fan_control.py /app/fan_control.py<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="k">CMD</span> <span class="p">[</span><span class="s2">&#34;python&#34;</span><span class="p">,</span> <span class="s2">&#34;/app/fan_control.py&#34;</span><span class="p">]</span><span class="err">
</span></span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">Fan Control</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;1.0&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="nt">slug</span><span class="p">:</span><span class="w"> </span><span class="l">fan_control</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l">Control the Raspberry Pi fan.</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>Then I try to launch it and find the addons in addOn store, however, I couldn&rsquo;t find it. I refresh the cache in the browser for 5 mins and couldn&rsquo;t find the new local addOns, then I asked GPT for fix, nothing really helpful.</p>
<p>Then I looked for the documents for HA local addOn configurations, I found:
<a href="https://developers.home-assistant.io/docs/add-ons/configuration/#add-on-configuration">https://developers.home-assistant.io/docs/add-ons/configuration/#add-on-configuration</a></p>
<p>There are 5 options are required to make the configuration works:</p>
<ul>
<li>name</li>
<li>version</li>
<li>slug</li>
<li>description</li>
<li>arch</li>
</ul>
<p>It worked after I added arch.</p>
<h2 id="setup-gpio-to-control-fan">setup gpio to control fan<a hidden class="anchor" aria-hidden="true" href="#setup-gpio-to-control-fan">#</a></h2>
<p>The fan I used was Geeekpi ICE tower fan, I need to control it with GPIO 4.</p>
<p>Then GPT gives me python script to control it:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">RPi.GPIO</span> <span class="k">as</span> <span class="nn">GPIO</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">time</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">os</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">FAN_PIN</span> <span class="o">=</span> <span class="mi">4</span>
</span></span><span class="line"><span class="cl"><span class="n">TEMP_THRESHOLD</span> <span class="o">=</span> <span class="mi">70</span>  <span class="c1"># in Celsius</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">GPIO</span><span class="o">.</span><span class="n">setmode</span><span class="p">(</span><span class="n">GPIO</span><span class="o">.</span><span class="n">BCM</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">GPIO</span><span class="o">.</span><span class="n">setup</span><span class="p">(</span><span class="n">FAN_PIN</span><span class="p">,</span> <span class="n">GPIO</span><span class="o">.</span><span class="n">OUT</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">get_cpu_temperature</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">    <span class="n">temp</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">popen</span><span class="p">(</span><span class="s2">&#34;vcgencmd measure_temp&#34;</span><span class="p">)</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="n">temp</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&#34;temp=&#34;</span><span class="p">,</span> <span class="s2">&#34;&#34;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&#34;&#39;C</span><span class="se">\n</span><span class="s2">&#34;</span><span class="p">,</span> <span class="s2">&#34;&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">try</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">temp</span> <span class="o">=</span> <span class="n">get_cpu_temperature</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="n">temp</span> <span class="o">&gt;</span> <span class="n">TEMP_THRESHOLD</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="n">GPIO</span><span class="o">.</span><span class="n">output</span><span class="p">(</span><span class="n">FAN_PIN</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">else</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="n">GPIO</span><span class="o">.</span><span class="n">output</span><span class="p">(</span><span class="n">FAN_PIN</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="k">except</span> <span class="ne">KeyboardInterrupt</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">GPIO</span><span class="o">.</span><span class="n">cleanup</span><span class="p">()</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>However, it didn&rsquo;t work. After checking the logging, I found that RPi.GPIO is not supported. Then I realized it&rsquo;s not official image, may doesn&rsquo;t have the GPIO configuration. Then I asked GPT to have a GPIO mapping, it gives me some suggestions:</p>
<ol>
<li>
<p>Adding <code>privileged=true</code> in configuration yaml file.
which will adding <code>--privileged</code> when running the docker.</p>
</li>
<li>
<p>Mapping the GPIO devices:
<code>    devices: - &quot;/dev/gpiomem:/dev/gpiomem&quot;</code></p>
</li>
</ol>
<p>Both of them doesn&rsquo;t work, then I try to launch these addOns by docker directly(which will save lot of time because doesn&rsquo;t need to wait it generated addOns)</p>
<p>I check the devices under <code>/dev</code> and run docker like:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-zsh" data-lang="zsh"><span class="line"><span class="cl">docker run --privileged -it <span class="se">\
</span></span></span><span class="line"><span class="cl">  --device /dev/gpiomem:/dev/gpiomem <span class="se">\
</span></span></span><span class="line"><span class="cl">  --device /dev/gpiomem0:/dev/gpiomem0 <span class="se">\
</span></span></span><span class="line"><span class="cl">  --device /dev/gpiomem1:/dev/gpiomem1 <span class="se">\
</span></span></span><span class="line"><span class="cl">  --device /dev/gpiomem2:/dev/gpiomem2 <span class="se">\
</span></span></span><span class="line"><span class="cl">  --device /dev/gpiomem3:/dev/gpiomem3 <span class="se">\
</span></span></span><span class="line"><span class="cl">  --device /dev/gpiomem4:/dev/gpiomem4 <span class="se">\
</span></span></span><span class="line"><span class="cl">  gpio_test_image
</span></span></code></pre></td></tr></table>
</div>
</div><p>But it still doesn&rsquo;t work.</p>
<p>I have spent more than 5 hours on it then, and I was looking for the docs about it.
Then I found some body already talked about it:</p>
<p><a href="https://community.home-assistant.io/t/raspberry-pi-5-gpio-pins-problem/667111">https://community.home-assistant.io/t/raspberry-pi-5-gpio-pins-problem/667111</a></p>
<p>And it&rsquo;s not supported on raspberry pi5, only works under raspberry pi4.</p>
<h1 id="reflection">Reflection<a hidden class="anchor" aria-hidden="true" href="#reflection">#</a></h1>
<p>The LLM can give us lots of information based on the training data. However, it still has many disadvantage.</p>
<h3 id="first-hallucination">First, hallucination.<a hidden class="anchor" aria-hidden="true" href="#first-hallucination">#</a></h3>
<p>It will make up some knowledge which doesn&rsquo;t based on prior knowledge. In my case, it made up the knowledge about HA in raspberry pi5. And it can&rsquo;t tell us which one is not possible, and if we should stop trying with current method(lack of reasoning capacity).</p>
<p>This will lead us spending a lot of time to debug what it tells us, which is much more time consuming. If I knew the raspberry pi5 can&rsquo;t use GPIO with HA I wouldn&rsquo;t try it.</p>
<h3 id="even-if-it-has-lots-of-shortages-we-can-still-use-it-and-learn-from-it">Even if it has lots of shortages, we can still use it and learn from it.<a hidden class="anchor" aria-hidden="true" href="#even-if-it-has-lots-of-shortages-we-can-still-use-it-and-learn-from-it">#</a></h3>
<p>For example, I used it and learned how to setup addons in HomeAssistant, which I would almost never touch this area, and it also taught me how to make a docker image with Dockerfile in a understandable and practical way, which is really helpful.</p>
<p>We should take the advantage with LLM to open our horizon and technical stacks, this will provide different point of view when we meet something new.</p>
<h3 id="expert-will-has-more-advantage">Expert will has more advantage<a hidden class="anchor" aria-hidden="true" href="#expert-will-has-more-advantage">#</a></h3>
<p>This new technology will benefit the experienced programmer more. Once the LLM provide some solutions or code, the programmer with more experience will know if this is possible or not very quick and give some more detailed instruction to LLM. As we know if we give a more detailed and well-organized description, we will have better output.</p>
<p>In this case these experts will free their hands from debugs and tedious work and think more deeper and systemically, which greatly increase productivity(Few people could organize a company).</p>
<p>The LLM is more like a powerful tool. Those with lots of prior knowledge will use it in the best way.</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://xichen1997.github.io/tags/chatgpt/">ChatGPT</a></li>
      <li><a href="https://xichen1997.github.io/tags/llm/">LLM</a></li>
      <li><a href="https://xichen1997.github.io/tags/homeassistant/">HomeAssistant</a></li>
      <li><a href="https://xichen1997.github.io/tags/raspberry-pi/">Raspberry-Pi</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="https://xichen1997.github.io/posts/2024-09-07-set-up-remote-access-for-my-backup-desktop-to-serve-as-remote-develoement-machine/">
    <span class="title">« Prev</span>
    <br>
    <span>Set up remote access for my backup desktop to serve as remote development machine</span>
  </a>
  <a class="next" href="https://xichen1997.github.io/posts/2024-04-16-hpc3-openmp-shared-memory-method/">
    <span class="title">Next »</span>
    <br>
    <span>HPC-3-use-openmp(shared-memory-method)</span>
  </a>
</nav>

  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2026 <a href="https://xichen1997.github.io/">Xi&#39;s Blog</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu');
    if (menu) {
        
        const scrollPosition = localStorage.getItem("menu-scroll-position");
        if (scrollPosition) {
            menu.scrollLeft = parseInt(scrollPosition, 10);
        }
        
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        const html = document.querySelector("html");
        if (html.dataset.theme === "dark") {
            html.dataset.theme = 'light';
            localStorage.setItem("pref-theme", 'light');
        } else {
            html.dataset.theme = 'dark';
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
